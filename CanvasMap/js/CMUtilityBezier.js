function CMUtilityBezier(){}CMUtilityBezier.GetSecondOrderEndPoints3D=function(NumSteps,X0,Y0,Z0,X1,Y1,Z1,X2,Y2,Z2){var DX1,DY1,DZ1;DX1=(X2-X0)/2;DY1=(Y2-Y0)/2;DZ1=(Z2-Z0)/2;var Result=CMUtilityBezier.GetSecondOrderEndPointsFromSlopes3D(NumSteps,X0,Y0,Z0,X1,Y1,Z1,DX1,DY1,DZ1);return(Result);}
CMUtilityBezier.GetSecondOrderEndPointsFromSlopes3D=function(NumSteps,X0,Y0,Z0,X1,Y1,Z1,DX1,DY1,DZ1){var AX,BX,CX;var AY,BY,CY;var AZ,BZ,CZ;var NumPoints=NumSteps-1;var Result=[];Result[0]=[NumPoints];Result[1]=[NumPoints];Result[2]=[NumPoints];DX1=-DX1;DY1=-DY1;DZ1=-DZ1;AX=X0-DX1-X1;BX=DX1;CX=X1;AY=Y0-DY1-Y1;BY=DY1;CY=Y1;AZ=Z0-DZ1-Z1;BZ=DZ1;CZ=Z1;var x2,y2,z2;var t;var t2;var Index=0;for(var i=1;i<NumSteps;i++){t=1.0-i/NumSteps;t2=t*t;x2=(AX*t2)+(BX*t)+CX;y2=(AY*t2)+(BY*t)+CY;z2=(AZ*t2)+(BZ*t)+CZ;Result[0][Index]=x2;Result[1][Index]=y2;Result[2][Index]=z2;Index++;}return(Result);}
CMUtilityBezier.GetSecondOrderPoints2D=function(NumSteps,X0,Y0,X1,Y1,X2,Y2,X3,Y3){var DX1,DY1;var DX2,DY2;DX1=(X2-X0)/2;DY1=(Y2-Y0)/2;DX2=(X3-X1)/2;DY2=(Y3-Y1)/2;var Result=CMUtilityBezier.GetSecondOrderPointsFromSlopes2D(NumSteps,X1,Y1,X2,Y2,DX1,DY1,DX2,DY2);return(Result);}
CMUtilityBezier.GetSecondOrderPointsFromSlopes2D=function(NumSteps,X1,Y1,X2,Y2,DX1,DY1,DX2,DY2){var NumPoints=NumSteps-1;var Result=[];Result[0]=[NumPoints];Result[1]=[NumPoints];var AX,BX,CX,DX;var AY,BY,CY,DY;AX=2*(X1-X2)+DX1+DX2;BX=3*(X2-X1)-2*DX1-DX2;CX=DX1;DX=X1;AY=2*(Y1-Y2)+DY1+DY2;BY=3*(Y2-Y1)-2*DY1-DY2;CY=DY1;DY=Y1;var x1,y1;var x2,y2;var t;var t2;var t3;var Index=0;for(var i=1;i<NumSteps;i++){t=i/NumSteps;t2=t*t;t3=t2*t;x2=(AX*t3)+(BX*t2)+CX*t+DX;y2=(AY*t3)+(BY*t2)+CY*t+DY;Result[0][Index]=x2;Result[1][Index]=y2;Index++;}return(Result);}